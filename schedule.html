<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Schedule</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body { font-family: sans-serif; background-color: #f9f9f9; margin: 0; padding: 1rem; }
    .collapsible { max-width: 600px; margin: 1rem auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden; }
    .collapsible header { background: #007bff; color: #fff; padding: 0.75rem 1rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
    .collapsible header h2 { margin: 0; font-size: 1.25rem; }
    .collapsible .content { padding: 1rem; display: none; }
    .collapsible.open .content { display: block; }
    h3 { margin-top: 1rem; }
    .exercise-list label { display: block; margin: 0.25rem 0; }
    .exercise-config { margin-left: 1rem; margin-bottom: 1rem; padding: 0.5rem 1rem; background-color: #eef2f5; border-radius: 6px; display: none; }
    #customAdd { display: flex; margin: 1rem 0; }
    #customAdd input { flex: 1; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; }
    #customAdd button { margin-left: 0.5rem; padding: 0.5rem 1rem; background: #007bff; color: #fff; border: none; border-radius: 4px; cursor: pointer; }
    #customAdd button:hover { background: #0056b3; }
    button[type="submit"] { display: block; margin: 1.5rem auto 0; padding: 0.75rem 2rem; font-size: 1rem; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
    button[type="submit"]:hover { background-color: #0056b3; }
    input[type="number"] { width: 5rem; }
  </style>
</head>
<body>
  <section class="collapsible" id="librarySection">
    <header onclick="toggleSection('librarySection')">
      <h2>Manage Your Exercises</h2>
      <span id="libraryToggle">+</span>
    </header>
    <div class="content">
      <!-- Library content unchanged -->
    </div>
  </section>

  <section class="collapsible open" id="scheduleSection">
    <header onclick="toggleSection('scheduleSection')">
      <h2>Set Workout Schedule</h2>
      <span id="scheduleToggle">-</span>
    </header>
    <div class="content">
      <form id="scheduleForm" onchange="toggleDays()">
        <!-- Form content unchanged -->
        <button type="submit">Save</button>
      </form>
    </div>
  </section>

  <script>
    // All previous functions unchanged...

    document.getElementById("scheduleForm").addEventListener("submit", function(e) {
      e.preventDefault();
      // Save logic
      const form = new FormData(this);
      const scheduleType = form.get("scheduleType");
      const schedule = { type: scheduleType, day1: [], day2: [], config: {} };
      masterExercises.forEach(ex => {
        [1,2].forEach(day => {
          if (form.getAll(`day${day}`).includes(ex)) {
            schedule[`day${day}`].push(ex);
            const sets = form.get(`${ex}_d${day}_sets`);
            const reps = form.get(`${ex}_d${day}_reps`);
            schedule.config[`${ex}_d${day}`] = { sets: Number(sets), reps: Number(reps) };
          }
        });
      });
      localStorage.setItem("masterExercises", JSON.stringify(masterExercises));
      localStorage.setItem("workoutSchedule", JSON.stringify(schedule));
      console.log("Schedule saved:", schedule);
      // Redirect to workout page reliably
      window.location.href = "index.html";
    });
  </script>
</body>
</html>
